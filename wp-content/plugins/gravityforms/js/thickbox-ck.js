/*
 * Thickbox 3.1 - One Box To Rule Them All.
 * By Cody Lindley (http://www.codylindley.com)
 * Copyright (c) 2007 cody lindley
 * Licensed under the MIT License: http://www.opensource.org/licenses/mit-license.php
*/function tb_init(e){jQuery(e).live("click",tb_click)}function tb_click(){var e=this.title||this.name||null,t=this.href||this.alt,n=this.rel||!1;tb_show(e,t,n);this.blur();return!1}function tb_show(e,t,n){try{if(typeof document.body.style.maxHeight=="undefined"){jQuery("body","html").css({height:"100%",width:"100%"});jQuery("html").css("overflow","hidden");if(document.getElementById("TB_HideSelect")===null){jQuery("body").append("<iframe id='TB_HideSelect'>"+thickboxL10n.noiframes+"</iframe><div id='TB_overlay'></div><div id='TB_window'></div>");jQuery("#TB_overlay").click(tb_remove)}}else if(document.getElementById("TB_overlay")===null){jQuery("body").append("<div id='TB_overlay'></div><div id='TB_window'></div>");jQuery("#TB_overlay").click(tb_remove)}tb_detectMacXFF()?jQuery("#TB_overlay").addClass("TB_overlayMacFFBGHack"):jQuery("#TB_overlay").addClass("TB_overlayBG");e===null&&(e="");jQuery("body").append("<div id='TB_load'><img src='"+imgLoader.src+"' /></div>");jQuery("#TB_load").show();var r;t.indexOf("?")!==-1?r=t.substr(0,t.indexOf("?")):r=t;var i=/\.jpg$|\.jpeg$|\.png$|\.gif$|\.bmp$/,s=r.toLowerCase().match(i);if(s==".jpg"||s==".jpeg"||s==".png"||s==".gif"||s==".bmp"){TB_PrevCaption="";TB_PrevURL="";TB_PrevHTML="";TB_NextCaption="";TB_NextURL="";TB_NextHTML="";TB_imageCount="";TB_FoundURL=!1;if(n){TB_TempArray=jQuery("a[rel="+n+"]").get();for(TB_Counter=0;TB_Counter<TB_TempArray.length&&TB_NextHTML==="";TB_Counter++){var o=TB_TempArray[TB_Counter].href.toLowerCase().match(i);if(TB_TempArray[TB_Counter].href!=t)if(TB_FoundURL){TB_NextCaption=TB_TempArray[TB_Counter].title;TB_NextURL=TB_TempArray[TB_Counter].href;TB_NextHTML="<span id='TB_next'>&nbsp;&nbsp;<a href='#'>"+thickboxL10n.next+"</a></span>"}else{TB_PrevCaption=TB_TempArray[TB_Counter].title;TB_PrevURL=TB_TempArray[TB_Counter].href;TB_PrevHTML="<span id='TB_prev'>&nbsp;&nbsp;<a href='#'>"+thickboxL10n.prev+"</a></span>"}else{TB_FoundURL=!0;TB_imageCount=thickboxL10n.image+" "+(TB_Counter+1)+" "+thickboxL10n.of+" "+TB_TempArray.length}}}imgPreloader=new Image;imgPreloader.onload=function(){imgPreloader.onload=null;var r=tb_getPageSize(),i=r[0]-150,s=r[1]-150,o=imgPreloader.width,u=imgPreloader.height;if(o>i){u*=i/o;o=i;if(u>s){o*=s/u;u=s}}else if(u>s){o*=s/u;u=s;if(o>i){u*=i/o;o=i}}TB_WIDTH=o+30;TB_HEIGHT=u+60;jQuery("#TB_window").append("<a href='' id='TB_ImageOff' title='"+thickboxL10n.close+"'><img id='TB_Image' src='"+t+"' width='"+o+"' height='"+u+"' alt='"+e+"'/></a>"+"<div id='TB_caption'>"+e+"<div id='TB_secondLine'>"+TB_imageCount+TB_PrevHTML+TB_NextHTML+"</div></div><div id='TB_closeWindow'><a href='#' id='TB_closeWindowButton' title='"+thickboxL10n.close+"'><img src='"+tb_closeImage+"' /></a></div>");jQuery("#TB_closeWindowButton").click(tb_remove);if(TB_PrevHTML!==""){function a(){jQuery(document).unbind("click",a)&&jQuery(document).unbind("click",a);jQuery("#TB_window").remove();jQuery("body").append("<div id='TB_window'></div>");tb_show(TB_PrevCaption,TB_PrevURL,n);return!1}jQuery("#TB_prev").click(a)}if(TB_NextHTML!==""){function f(){jQuery("#TB_window").remove();jQuery("body").append("<div id='TB_window'></div>");tb_show(TB_NextCaption,TB_NextURL,n);return!1}jQuery("#TB_next").click(f)}jQuery(document).bind("keydown.thickbox",function(e){e.stopImmediatePropagation();if(e.which==27)jQuery(document).triggerHandler("wp_CloseOnEscape",[{event:e,what:"thickbox",cb:tb_remove}])||tb_remove();else if(e.which==190){if(TB_NextHTML!=""){jQuery(document).unbind("thickbox");f()}}else if(e.which==188&&TB_PrevHTML!=""){jQuery(document).unbind("thickbox");a()}return!1});tb_position();jQuery("#TB_load").remove();jQuery("#TB_ImageOff").click(tb_remove);jQuery("#TB_window").css({visibility:"visible"})};imgPreloader.src=t}else{var u=t.replace(/^[^\?]+\??/,""),a=tb_parseQuery(u);__inlineId=a.inlineId;TB_WIDTH=a.width*1+30||630;TB_HEIGHT=a.height*1+40||440;ajaxContentW=TB_WIDTH-30;ajaxContentH=TB_HEIGHT-45;if(t.indexOf("TB_iframe")!=-1){urlNoQuery=t.split("TB_");jQuery("#TB_iframeContent").remove();if(a["modal"]!="true")jQuery("#TB_window").append("<div id='TB_title'><div id='TB_ajaxWindowTitle'>"+e+"</div><div id='TB_closeAjaxWindow'><a href='#' id='TB_closeWindowButton' title='"+thickboxL10n.close+"'><img src='"+tb_closeImage+"' /></a></div></div><iframe frameborder='0' hspace='0' src='"+urlNoQuery[0]+"' id='TB_iframeContent' name='TB_iframeContent"+Math.round(Math.random()*1e3)+"' onload='tb_showIframe()' style='width:"+(ajaxContentW+29)+"px;height:"+(ajaxContentH+17)+"px;' >"+thickboxL10n.noiframes+"</iframe>");else{jQuery("#TB_overlay").unbind();jQuery("#TB_window").append("<iframe frameborder='0' hspace='0' src='"+urlNoQuery[0]+"' id='TB_iframeContent' name='TB_iframeContent"+Math.round(Math.random()*1e3)+"' onload='tb_showIframe()' style='width:"+(ajaxContentW+29)+"px;height:"+(ajaxContentH+17)+"px;'>"+thickboxL10n.noiframes+"</iframe>")}}else if(jQuery("#TB_window").css("visibility")!="visible")if(a["modal"]!="true")jQuery("#TB_window").append("<div id='TB_title'><div id='TB_ajaxWindowTitle'>"+e+"</div><div id='TB_closeAjaxWindow'><a href='#' id='TB_closeWindowButton'><img src='"+tb_closeImage+"' /></a></div></div><div id='TB_ajaxContent' style='width:"+ajaxContentW+"px;height:"+ajaxContentH+"px'></div>");else{jQuery("#TB_overlay").unbind();jQuery("#TB_window").append("<div id='TB_ajaxContent' class='TB_modal' style='width:"+ajaxContentW+"px;height:"+ajaxContentH+"px;'></div>")}else{jQuery("#TB_ajaxContent")[0].style.width=ajaxContentW+"px";jQuery("#TB_ajaxContent")[0].style.height=ajaxContentH+"px";jQuery("#TB_ajaxContent")[0].scrollTop=0;jQuery("#TB_ajaxWindowTitle").html(e)}jQuery("#TB_closeWindowButton").click(tb_remove);if(t.indexOf("TB_inline")!=-1){jQuery("#TB_ajaxContent").append(jQuery("#"+a.inlineId).children());jQuery("#TB_window").unload(function(){jQuery("#"+a.inlineId).append(jQuery("#TB_ajaxContent").children())});tb_position();jQuery("#TB_load").remove();jQuery("#TB_window").css({visibility:"visible"})}else if(t.indexOf("TB_iframe")!=-1){tb_position();if(jQuery.browser.safari){jQuery("#TB_load").remove();jQuery("#TB_window").css({visibility:"visible"})}}else jQuery("#TB_ajaxContent").load(t+="&random="+(new Date).getTime(),function(){tb_position();jQuery("#TB_load").remove();tb_init("#TB_ajaxContent a.thickbox");jQuery("#TB_window").css({visibility:"visible"})})}a.modal||jQuery(document).bind("keyup.thickbox",function(e){if(e.which==27){e.stopImmediatePropagation();jQuery(document).triggerHandler("wp_CloseOnEscape",[{event:e,what:"thickbox",cb:tb_remove}])||tb_remove();return!1}})}catch(f){}}function tb_showIframe(){jQuery("#TB_load").remove();jQuery("#TB_window").css({visibility:"visible"})}function tb_remove(){jQuery("#TB_imageOff").unbind("click");jQuery("#TB_closeWindowButton").unbind("click");jQuery("#TB_window").fadeOut("fast",function(){if(__inlineId){jQuery("#"+__inlineId).append(jQuery("#TB_ajaxContent").children());__inlineId=""}jQuery("#TB_window,#TB_overlay,#TB_HideSelect").unbind().remove()});jQuery("#TB_load").remove();if(typeof document.body.style.maxHeight=="undefined"){jQuery("body","html").css({height:"auto",width:"auto"});jQuery("html").css("overflow","")}jQuery(document).unbind(".thickbox");return!1}function tb_position(){var e=typeof document.body.style.maxHeight=="undefined";jQuery("#TB_window").css({marginLeft:"-"+parseInt(TB_WIDTH/2,10)+"px",width:TB_WIDTH+"px"});e||jQuery("#TB_window").css({marginTop:"-"+parseInt(TB_HEIGHT/2,10)+"px"})}function tb_parseQuery(e){var t={};if(!e)return t;var n=e.split(/[;&]/);for(var r=0;r<n.length;r++){var i=n[r].split("=");if(!i||i.length!=2)continue;var s=unescape(i[0]),o=unescape(i[1]);o=o.replace(/\+/g," ");t[s]=o}return t}function tb_getPageSize(){var e=document.documentElement,t=window.innerWidth||self.innerWidth||e&&e.clientWidth||document.body.clientWidth,n=window.innerHeight||self.innerHeight||e&&e.clientHeight||document.body.clientHeight;arrayPageSize=[t,n];return arrayPageSize}function tb_detectMacXFF(){var e=navigator.userAgent.toLowerCase();if(e.indexOf("mac")!=-1&&e.indexOf("firefox")!=-1)return!0}if(typeof tb_pathToImage!="string")var tb_pathToImage=thickboxL10n.loadingAnimation;if(typeof tb_closeImage!="string")var tb_closeImage=thickboxL10n.closeImage;jQuery(document).ready(function(){tb_init("a.thickbox, area.thickbox, input.thickbox");imgLoader=new Image;imgLoader.src=tb_pathToImage});var __inlineId="";