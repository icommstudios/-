// "prop" method fix for previous versions of jQuery
function gformBindFormatPricingFields(){jQuery(".ginput_amount, .ginput_donation_amount").bind("change",function(){gformFormatPricingField(this)});jQuery(".ginput_amount, .ginput_donation_amount").each(function(){gformFormatPricingField(this)})}function Currency(e){this.currency=e;this.toNumber=function(e){return this.isNumeric(e)?parseFloat(e):gformCleanNumber(e,this.currency.symbol_right,this.currency.symbol_left,this.currency.decimal_separator)};this.toMoney=function(e){this.isNumeric(e)||(e=this.toNumber(e));if(e===!1)return"";e+="";negative="";if(e[0]=="-"){negative="-";e=parseFloat(e.substr(1))}money=this.numberFormat(e,this.currency.decimals,this.currency.decimal_separator,this.currency.thousand_separator);var t=this.currency.symbol_left?this.currency.symbol_left+this.currency.symbol_padding:"",n=this.currency.symbol_right?this.currency.symbol_padding+this.currency.symbol_right:"";money=negative+this.htmlDecode(t)+money+this.htmlDecode(n);return money};this.numberFormat=function(e,t,n,r,i){var i=typeof i=="undefined";e=(e+"").replace(",","").replace(" ","");var s=isFinite(+e)?+e:0,o=isFinite(+t)?Math.abs(t):0,u=typeof r=="undefined"?",":r,a=typeof n=="undefined"?".":n,f="",l=function(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n};t=="0"?f=(""+Math.round(s)).split("."):t==-1?f=(""+s).split("."):f=l(s,o).split(".");f[0].length>3&&(f[0]=f[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,u));if(i&&(f[1]||"").length<o){f[1]=f[1]||"";f[1]+=(new Array(o-f[1].length+1)).join("0")}return f.join(a)};this.isNumeric=function(e){return gformIsNumber(e)};this.htmlDecode=function(e){var t,n,r=e,i=r.match(/&#[0-9]{1,5};/g);if(i!=null)for(var s=0;s<i.length;s++){n=i[s];t=n.substring(2,n.length-1);t>=-32768&&t<=65535?r=r.replace(n,String.fromCharCode(t)):r=r.replace(n,"")}return r}}function gformCleanNumber(e,t,n,r){e+=" ";e=e.replace(/&.*?;/,"",e);e=e.replace(t,"");e=e.replace(n,"");var i="",s=!1;for(var o=0;o<e.length;o++){var u=e.substr(o,1);parseInt(u)>=0&&parseInt(u)<=9||u==r?i+=u:u=="-"&&(s=!0)}var a="";for(var o=0;o<i.length;o++){var f=i.substr(o,1);f>="0"&&f<="9"?a+=f:f==r&&(a+=".")}s&&(a="-"+a);return gformIsNumber(a)?parseFloat(a):!1}function gformIsNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}function gformIsNumeric(e,t){switch(t){case"decimal_dot":var n=new RegExp("^(-?[0-9]{1,3}(?:,?[0-9]{3})*(?:.[0-9]+)?)$");return n.test(e);case"decimal_comma":var n=new RegExp("^(-?[0-9]{1,3}(?:.?[0-9]{3})*(?:,[0-9]+)?)$");return n.test(e)}return!1}function gformDeleteUploadedFile(e,t){var n=jQuery("#field_"+e+"_"+t);n.find(".ginput_preview").hide();n.find('input[type="file"]').removeClass("gform_hidden");n.find(".ginput_post_image_file").show();n.find('input[type="text"]').val("");var r=jQuery.secureEvalJSON(jQuery("#gform_uploaded_files_"+e).val());if(r){r["input_"+t]=null;jQuery("#gform_uploaded_files_"+e).val(jQuery.toJSON(r))}}function gformIsHidden(e){return e.parents(".gfield").not(".gfield_hidden_product").css("display")=="none"}function gformCalculateTotalPrice(e){if(!_gformPriceFields[e])return;var t=0;_anyProductSelected=!1;for(var n=0;n<_gformPriceFields[e].length;n++)t+=gformCalculateProductPrice(e,_gformPriceFields[e][n]);if(_anyProductSelected){var r=gformGetShippingPrice(e);t+=r}window.gform_product_total&&(t=window.gform_product_total(e,t));var i=jQuery(".ginput_total_"+e);if(i.length>0){i.next().val(t);i.html(gformFormatMoney(t))}}function gformGetShippingPrice(e){var t=jQuery(".gfield_shipping_"+e+' input[type="hidden"], .gfield_shipping_'+e+" select, .gfield_shipping_"+e+" input:checked"),n=0;t.length==1&&!gformIsHidden(t)&&(t.attr("type")&&t.attr("type").toLowerCase()=="hidden"?n=t.val():n=gformGetPrice(t.val()));return gformToNumber(n)}function gformGetFieldId(e){var t=jQuery(e).attr("id"),n=t.split("_");if(n.length<=0)return 0;var r=n[n.length-1];return r}function gformCalculateProductPrice(e,t){var n=gformGetBasePrice(e,t),r="_"+e+"_"+t;jQuery(".gfield_option"+r+", .gfield_shipping_"+e).find("select").each(function(){var t=gformGetPrice(jQuery(this).val()),n=gformGetFieldId(this);jQuery(this).children("option").each(function(){var r=gformGetOptionLabel(this,jQuery(this).val(),t,e,n);jQuery(this).html(r)})});jQuery(".gfield_option"+r).find(".gfield_checkbox").find("input").each(function(){var t=gformGetFieldId(jQuery(this).parents(".gfield_checkbox")),n=jQuery(this).next(),r=gformGetOptionLabel(n,jQuery(this).val(),0,e,t);n.html(r)});jQuery(".gfield_option"+r+", .gfield_shipping_"+e).find(".gfield_radio").each(function(){var t=0,n=jQuery(this).find("input:checked").val(),r=gformGetFieldId(this);n&&(t=gformGetPrice(n));jQuery(this).find("input").each(function(){var n=jQuery(this).next(),i=gformGetOptionLabel(n,jQuery(this).val(),t,e,r);n.html(i)})});jQuery(".gfield_option"+r).find("input:checked, select").each(function(){gformIsHidden(jQuery(this))||(n+=gformGetPrice(jQuery(this).val()))});var i,s=jQuery("#ginput_quantity_"+e+"_"+t);if(s.length>0)i=gformIsNumber(s.val())?s.val():0;else{quantityElement=jQuery(".gfield_quantity_"+e+"_"+t);i=1;quantityElement.find("select").length>0?i=quantityElement.find("select").val():quantityElement.find("input").length>0&&(i=quantityElement.find("input").val());gformIsNumber(i)||(i=0)}i=parseFloat(i);i>0&&(_anyProductSelected=!0);n*=i;n=Math.round(n*100)/100;return n}function gformGetBasePrice(e,t){var n="_"+e+"_"+t,r=0,i=jQuery("#ginput_base_price"+n+", .gfield_donation"+n+' input[type="text"], .gfield_product'+n+" .ginput_amount");if(i.length>0){r=i.val();gformIsHidden(i)&&(r=0)}else{i=jQuery(".gfield_product"+n+" select, .gfield_product"+n+" input:checked, .gfield_donation"+n+" select, .gfield_donation"+n+" input:checked");var s=i.val();if(s){s=s.split("|");r=s.length>1?s[1]:0}gformIsHidden(i)&&(r=0)}var o=new Currency(gf_global.gf_currency_config);r=o.toNumber(r);return r===!1?0:r}function gformFormatMoney(e){if(!gf_global.gf_currency_config)return e;var t=new Currency(gf_global.gf_currency_config);return t.toMoney(e)}function gformFormatPricingField(e){if(gf_global.gf_currency_config){var t=new Currency(gf_global.gf_currency_config),n=t.toMoney(jQuery(e).val());jQuery(e).val(n)}}function gformToNumber(e){var t=new Currency(gf_global.gf_currency_config);return t.toNumber(e)}function gformGetPriceDifference(e,t){var n=parseFloat(t)-parseFloat(e);price=gformFormatMoney(n);n>0&&(price="+"+price);return price}function gformGetOptionLabel(e,t,n,r,i){e=jQuery(e);var s=gformGetPrice(t),o=e.attr("price"),u=e.html().replace(/<span(.*)<\/span>/i,"").replace(o,""),a=gformGetPriceDifference(n,s);a=gformToNumber(a)==0?"":" "+a;e.attr("price",a);var f=e[0].tagName.toLowerCase()=="option"?" "+a:"<span class='ginput_price'>"+a+"</span>",l=u+f;window.gform_format_option_label&&(l=gform_format_option_label(l,u,f,n,s,r,i));return l}function gformGetProductIds(e,t){var n=jQuery(t).hasClass(e)?jQuery(t).attr("class").split(" "):jQuery(t).parents("."+e).attr("class").split(" ");for(var r=0;r<n.length;r++)if(n[r].substr(0,e.length)==e&&n[r]!=e)return{formId:n[r].split("_")[2],productFieldId:n[r].split("_")[3]};return{formId:0,fieldId:0}}function gformGetPrice(e){var t=e.split("|"),n=new Currency(gf_global.gf_currency_config);return t.length>1&&n.toNumber(t[1])!==!1?n.toNumber(t[1]):0}function gformRegisterPriceField(e){_gformPriceFields[e.formId]||(_gformPriceFields[e.formId]=new Array);for(var t=0;t<_gformPriceFields[e.formId].length;t++)if(_gformPriceFields[e.formId][t]==e.productFieldId)return;_gformPriceFields[e.formId].push(e.productFieldId)}function gformInitPriceFields(){jQuery(".gfield_price").each(function(){var e=gformGetProductIds("gfield_price",this);gformRegisterPriceField(e);jQuery(this).find('input[type="text"], input[type="number"], select').change(function(){var e=gformGetProductIds("gfield_price",this);e.formId==0&&(e=gformGetProductIds("gfield_shipping",this));jQuery(document).trigger("gform_price_change",[e,this]);gformCalculateTotalPrice(e.formId)});jQuery(this).find('input[type="radio"], input[type="checkbox"]').click(function(){var e=gformGetProductIds("gfield_price",this);e.formId==0&&(e=gformGetProductIds("gfield_shipping",this));jQuery(document).trigger("gform_price_change",[e,this]);gformCalculateTotalPrice(e.formId)})});for(formId in _gformPriceFields)gformCalculateTotalPrice(formId)}function gformShowPasswordStrength(e){var t=jQuery("#"+e).val(),n=jQuery("#"+e+"_2").val(),r=gformPasswordStrength(t,n),i=window.gf_text["password_"+r];jQuery("#"+e+"_strength").val(r);jQuery("#"+e+"_strength_indicator").removeClass("blank mismatch short good bad strong").addClass(r).html(i)}function gformPasswordStrength(e,t){var n=1,r=2,i=3,s=4,o=5,u=0,a,f;if(e.length<=0)return"blank";if(e!=t&&t.length>0)return"mismatch";if(e.length<4)return"short";e.match(/[0-9]/)&&(u+=10);e.match(/[a-z]/)&&(u+=26);e.match(/[A-Z]/)&&(u+=26);e.match(/[^a-zA-Z0-9]/)&&(u+=31);a=Math.log(Math.pow(u,e.length));f=a/Math.LN2;return f<40?"bad":f<56?"good":"strong"}function gformAddListItem(e,t){if(jQuery(e).hasClass("gfield_icon_disabled"))return;var n=jQuery(e).parent().parent(),r=n.clone();r.find("input, select").val("").attr("tabindex",r.find("input:last").attr("tabindex"));n.after(r);gformToggleIcons(n.parent(),t);gformAdjustClasses(n.parent())}function gformDeleteListItem(e,t){var n=jQuery(e).parent().parent(),r=n.parent();n.remove();gformToggleIcons(r,t);gformAdjustClasses(r)}function gformAdjustClasses(e){var t=e.children();for(var n=0;n<t.length;n++){var r=(n+1)%2==0?"gfield_list_row_even":"gfield_list_row_odd";jQuery(t[n]).removeClass("gfield_list_row_odd").removeClass("gfield_list_row_even").addClass(r)}}function gformToggleIcons(e,t){var n=e.children().length;n==1?e.find(".delete_list_item").css("visibility","hidden"):e.find(".delete_list_item").css("visibility","visible");if(t>0&&n>=t){gfield_original_title=e.find(".add_list_item:first").attr("title");e.find(".add_list_item").addClass("gfield_icon_disabled").attr("title","")}else{var r=e.find(".add_list_item");r.removeClass("gfield_icon_disabled");gfield_original_title&&r.attr("title",gfield_original_title)}}function gformMatchCard(e){var t=gformFindCardType(jQuery("#"+e).val()),n=jQuery("#"+e).parents(".gfield").find(".gform_card_icon_container");if(!t)jQuery(n).find(".gform_card_icon").removeClass("gform_card_icon_selected gform_card_icon_inactive");else{jQuery(n).find(".gform_card_icon").removeClass("gform_card_icon_selected").addClass("gform_card_icon_inactive");jQuery(n).find(".gform_card_icon_"+t).removeClass("gform_card_icon_inactive").addClass("gform_card_icon_selected")}}function gformFindCardType(e){if(e.length<4)return!1;var t=window.gf_cc_rules,n=new Array;for(type in t)for(i in t[type])if(t[type][i].indexOf(e.substring(0,t[type][i].length))===0){n[n.length]=type;break}return n.length==1?n[0].toLowerCase():!1}function gformToggleCreditCard(){jQuery("#gform_payment_method_creditcard").is(":checked")?jQuery(".gform_card_fields_container").slideDown():jQuery(".gform_card_fields_container").slideUp()}function gformInitChosenFields(e,t){return jQuery(e).each(function(){var e=jQuery(this);if(e.is(":visible")&&e.siblings(".chzn-container").length==0){var n=gform.applyFilters("gform_chosen_options",{no_results_text:t},e);e.chosen(n)}})}function gformFormatNumber(e,t,n,r){if(typeof n=="undefined")if(window.gf_global){var i=new Currency(gf_global.gf_currency_config);n=i.currency.decimal_separator}else n=".";if(typeof r=="undefined")if(window.gf_global){var i=new Currency(gf_global.gf_currency_config);r=i.currency.thousand_separator}else r=",";var i=new Currency;return i.numberFormat(e,t,n,r,!1)}function gformToNumber(e){var t=new Currency(gf_global.gf_currency_config);return t.toNumber(e)}function getMatchGroups(e,t){var n=new Array;while(t.test(e)){var r=n.length;n[r]=t.exec(e);e=e.replace(""+n[r][0],"")}return n}var originalPropMethod=jQuery.fn.prop;jQuery.fn.prop=function(){return typeof originalPropMethod=="undefined"?jQuery.fn.attr.apply(this,arguments):originalPropMethod.apply(this,arguments)};jQuery(document).ready(function(){jQuery(document).bind("gform_post_render",gformBindFormatPricingFields)});var _gformPriceFields=new Array,_anyProductSelected,gfield_original_title="",GFCalc=function(formId,formulaFields){this.patt=/{[^{]*?:(\d+(\.\d+)?)(:(.*?))?}/i;this.exprPatt=/^[0-9 -/*\(\)]+$/i;this.isCalculating={};this.init=function(e,t){var n=this;jQuery(document).bind("gform_post_conditional_logic",function(){for(var r=0;r<t.length;r++){var i=jQuery.extend({},t[r]);n.runCalc(i,e)}});for(var r=0;r<t.length;r++){var i=jQuery.extend({},t[r]);this.runCalc(i,e);this.bindCalcEvents(i,e)}};this.runCalc=function(formulaField,formId){var calcObj=this,formulaInput,expr,field=jQuery("#field_"+formId+"_"+formulaField.field_id);formulaInput=jQuery("#input_"+formId+"_"+formulaField.field_id);var previous_val=formulaInput.val();expr=calcObj.replaceFieldTags(formId,formulaField.formula,formulaField.numberFormat);result="";if(calcObj.exprPatt.test(expr))try{result=eval(expr)}catch(e){}window.gform_calculation_result&&(result=window.gform_calculation_result(result,formulaField,formId,calcObj));if(field.hasClass("gfield_price"))result=gformFormatMoney(result?result:0);else{var decimalSeparator,thousandSeparator;if(formulaField.numberFormat=="decimal_comma"){decimalSeparator=",";thousandSeparator="."}else if(formulaField.numberFormat=="decimal_dot"){decimalSeparator=".";thousandSeparator=","}result=gformFormatNumber(result,gformIsNumber(formulaField.rounding)?formulaField.rounding:-1,decimalSeparator,thousandSeparator)}if(result==previous_val)return;if(field.hasClass("gfield_price")){formulaInput.text(result);jQuery("#ginput_base_price_"+formId+"_"+formulaField.field_id).val(result).trigger("change");gformCalculateTotalPrice(formId)}else formulaInput.val(result).trigger("change")};this.bindCalcEvents=function(e,t){var n=this,r=e.field_id,s=getMatchGroups(e.formula,this.patt);n.isCalculating[r]=!1;for(i in s){var o=s[i][1],u=parseInt(o),a=jQuery("#field_"+t+"_"+u).find('input[name="input_'+o+'"], select[name="input_'+o+'"]');a.prop("type")=="checkbox"||a.prop("type")=="radio"?jQuery(a).click(function(){n.bindCalcEvent(o,e,t,0)}):a.is("select")||a.prop("type")=="hidden"?jQuery(a).change(function(){n.bindCalcEvent(o,e,t,0)}):jQuery(a).keydown(function(){n.bindCalcEvent(o,e,t)}).change(function(){n.bindCalcEvent(o,e,t,0)})}};this.bindCalcEvent=function(e,t,n,r){var i=this,s=t.field_id;r=r==undefined?345:r;i.isCalculating[s][e]&&clearTimeout(i.isCalculating[s][e]);i.isCalculating[s][e]=window.setTimeout(function(){i.runCalc(t,n)},r)};this.replaceFieldTags=function(e,t,n){var r=getMatchGroups(t,this.patt),s=t;for(i in r){var o=r[i][1],u=parseInt(o),a=r[i][3],f=0,l=jQuery("#field_"+e+"_"+u).find('input[name="input_'+o+'"], select[name="input_'+o+'"]');if(l.length>1||l.prop("type")=="checkbox")l=l.filter(":checked");var c=window.gf_check_field_rule?gf_check_field_rule(e,u,true,"")=="show":!0;if(l.length>0&&c){var h=l.val();h=h.split("|");h.length>1?f=h[1]:f=l.val()}var p=".";if(n=="decimal_comma")p=",";else if(n=="decimal_dot")p=".";else if(window.gf_global){var d=l.attr("type"),v=jQuery("#field_"+e+"_"+u).find('select[name="input_'+o+'"]').length>0,m=d=="checkbox"||d=="radio"||v;if(!m){var g=new Currency(gf_global.gf_currency_config);p=g.currency.decimal_separator}}f=gformCleanNumber(f,"","",p);f||(f=0);t=t.replace(r[i][0],f)}return t};this.init(formId,formulaFields)},gform={hooks:{action:{},filter:{}},addAction:function(e,t,n,r){gform.addHook("action",e,t,n,r)},addFilter:function(e,t,n,r){gform.addHook("filter",e,t,n,r)},doAction:function(e){gform.doHook("action",e,arguments)},applyFilters:function(e){return gform.doHook("filter",e,arguments)},removeAction:function(e,t){gform.removeHook("action",e,t)},removeFilter:function(e,t,n){gform.removeHook("filter",e,t,n)},addHook:function(e,t,n,r,i){undefined==gform.hooks[e][t]&&(gform.hooks[e][t]=[]);var s=gform.hooks[e][t];undefined==i&&(i=t+"_"+s.length);gform.hooks[e][t].push({tag:i,callable:n,priority:r})},doHook:function(e,t,n){n=Array.prototype.slice.call(n,1);if(undefined!=gform.hooks[e][t]){var r=gform.hooks[e][t],i;r.sort(function(e,t){return e.priority-t.priority});for(var s=0;s<r.length;s++){i=r[s].callable;typeof i!="function"&&(i=window[i]);"action"==e?i.apply(null,n):n[0]=i.apply(null,n)}}if("filter"==e)return n[0]},removeHook:function(e,t,n,r){if(undefined!=gform.hooks[e][t]){var i=gform.hooks[e][t];for(var s=i.length-1;s>=0;s--)(undefined==r||r==i[s].tag)&&(undefined==n||n==i[s].priority)&&i.splice(s,1)}}};